---
tags: rspec tiger updates
---
These notes were made while upgrading from [[RSpec 1.0.3]] to [[RSpec 1.0.4]] on [[Mac OS X]] [[Tiger]].

Like the last upgrade (see "[[Upgrading to RSpec 1.0.3 on Mac OS X Tiger]]"), there was no corresponding [[Spec::UI]] upgrade.

= Pre-testing =

First double check that all [[specs]] are passing for [[Walrus]]. This is a good check because there are a ''lot'' of specifications, many of them containing numerous assertions:

<pre># from the top-level directory of the Walrus source tree:
rake spec</pre>

= Download and install =

<pre>sudo gem install rspec</pre>

== Output ==

<pre>Bulk updating Gem source index for: http://gems.rubyforge.org
Successfully installed rspec-1.0.4
Installing ri documentation for rspec-1.0.4...
Installing RDoc documentation for rspec-1.0.4...</pre>

= Update [[FastRI]] index =

<pre>fastri-server -b</pre>

== Output ==

<pre>Indexing RI docs for ParseTree version 1.7.0.
Indexing RI docs for RubyInline version 3.6.3.
Indexing RI docs for ZenTest version 3.6.0.
Indexing RI docs for actionmailer version 1.3.3.
Indexing RI docs for actionpack version 1.13.3.
Indexing RI docs for actionwebservice version 1.2.3.
Indexing RI docs for activerecord version 1.15.3.
Indexing RI docs for activesupport version 1.4.2.
Indexing RI docs for dhaka version 2.1.0.
Indexing RI docs for diff-lcs version 1.1.2.
Indexing RI docs for fastri version 0.3.0.1.
Indexing RI docs for heckle version 1.4.0.
Indexing RI docs for hoe version 1.2.1.
Indexing RI docs for model_security_generator version 0.0.9.
Indexing RI docs for rake version 0.7.3.
Indexing RI docs for rcodetools version 0.5.0.0.
Indexing RI docs for rcov version 0.8.0.2.
Indexing RI docs for rspec version 1.0.4.
Indexing RI docs for ruby-debug version 0.9.3.
Indexing RI docs for ruby-debug-base version 0.9.3.
Indexing RI docs for ruby-prof version 0.4.1.
Indexing RI docs for ruby2ruby version 1.1.5.
Indexing RI docs for rubyforge version 0.4.2.
Indexing RI docs for rubygems version 0.9.2.
Indexing RI docs for spec_ui version 0.2.3.
Indexing RI docs for sqlite3-ruby version 1.2.1.
Indexing RI docs for walrus version 0.1.
Indexing RI docs for zentest version 3.5.0.
Building index.
Indexed:
* 12498 methods
* 2456 classes/modules
Needed 2.74803 seconds</pre>

= Post-testing =

<pre># run the specs again
rake spec</pre>

= [[TextMate]] =

<pre>cd ~/Library/Application\ Support/TextMate/Bundles/RSpec.tmbundle
svn up</pre>

== Output ==

There were no changes since the last [[RSpec]] release:

<pre>At revision 2060.</pre>

== After updating ==

Normally, if [[TextMate]] is running, from the [[TextMate]] "Bundles" menu, open the "Bundle Editor" submenu and select "Reload Bundles". But in this case as there were no changes this should not be necessary.

= [[Rails]] =

I have a [[Rails]] project where [[rspec]] is installed as a plug-in. The <tt>--force</tt> switch is necessary in order to install over the previously installed copy:

<pre># from inside the Rails application top-level directory
script/plugin install --force svn://rubyforge.org/var/svn/rspec/tags/REL_1_0_4/rspec
script/plugin install --force svn://rubyforge.org/var/svn/rspec/tags/REL_1_0_4/rspec_on_rails</pre>

See if any other changes are necessary:

<pre>script/generate rspec --pretend</pre>

== Output ==

<pre>      exists  spec
overwrite spec/spec_helper.rb? [Ynaqd] d
--- script/../config/../spec/spec_helper.rb     2007-05-29 16:25:38.000000000 +0200
+++ script/../config/../spec/spec_helper.rb.22958.0     2007-05-30 11:59:44.000000000 +0200
@@ -8,6 +8,9 @@
   config.use_transactional_fixtures = true
   config.use_instantiated_fixtures  = false
   config.fixture_path = RAILS_ROOT + '/spec/fixtures'
+  config.before(:each, :behaviour_type => :controller) do
+    raise_controller_errors
+  end
 
   # You can declare fixtures for each behaviour like this:
   #   describe "...." do
\ No newline at end of file
retrying
overwrite spec/spec_helper.rb? [Ynaqd] n
       force  spec/spec_helper.rb
   identical  spec/spec.opts
   identical  previous_failures.txt
   identical  script/spec_server
   identical  script/spec</pre>

So I decided to proceed with the change:

<pre>script/generate rspec</pre>

= Cleaning up old versions of installed [[gems]] =

I also took the opportunity to clean up some older versions of the installed [[gems]].

<pre>sudo gem cleanup</pre>

== Output ==

<pre>Cleaning up installed gems...
Attempting uninstall on rspec-0.9.0
Successfully uninstalled rspec version 0.9.0
Attempting uninstall on spec_ui-0.2.0
Successfully uninstalled spec_ui version 0.2.0
Attempting uninstall on rspec-1.0.2
Successfully uninstalled rspec version 1.0.2
Attempting uninstall on rspec-0.8.2
Successfully uninstalled rspec version 0.8.2
Attempting uninstall on rspec-1.0.3
Successfully uninstalled rspec version 1.0.3
Attempting uninstall on rspec-0.9.2
Successfully uninstalled rspec version 0.9.2
Attempting uninstall on spec_ui-0.2.2
Successfully uninstalled spec_ui version 0.2.2
Attempting uninstall on rspec-0.9.3
Successfully uninstalled rspec version 0.9.3
Attempting uninstall on rspec-0.9.4
Successfully uninstalled rspec version 0.9.4
Attempting uninstall on ruby-debug-0.9.1
Successfully uninstalled ruby-debug version 0.9.1
Attempting uninstall on ruby-debug-0.9.2
Successfully uninstalled ruby-debug version 0.9.2
Attempting uninstall on ruby-debug-base-0.9.1
Successfully uninstalled ruby-debug-base version 0.9.1
Attempting uninstall on ruby-debug-base-0.9.2
Successfully uninstalled ruby-debug-base version 0.9.2
Attempting uninstall on heckle-1.3.0
Successfully uninstalled heckle version 1.3.0
Attempting uninstall on ZenTest-3.5.2
Successfully uninstalled ZenTest version 3.5.2
Attempting uninstall on ZenTest-3.4.3
Successfully uninstalled ZenTest version 3.4.3
Attempting uninstall on hoe-1.2.0
Successfully uninstalled hoe version 1.2.0
Attempting uninstall on rubyforge-0.4.1
Successfully uninstalled rubyforge version 0.4.1
Attempting uninstall on rake-0.7.2
Successfully uninstalled rake version 0.7.2
Attempting uninstall on rspec-1.0.0
Successfully uninstalled rspec version 1.0.0
Clean Up Complete</pre>

For more information on removing old [[gems]], see "[[Removing older versions of installed gems]]".
