---
tags: bugzilla updates
---
= Upgrade procedure =

These notes were made during the upgrade from [[Bugzilla]] 2.22.1 to 2.22.2:

* Run <tt>sanitycheck.cgi</tt> from within the browser.
* In the "Parameters" section set <tt>shutdownhtml</tt> to a useful value:

<pre>Currently closed for maintenance, please check back again soon.</pre>

* Back up the database:

<pre># no need to pass --opt with MySQL 4.1 and up
mysqldump -u database_user -p database_name | bzip2 -c > ~/bugzilla-2.22.1.sql.bz2</pre>

* Back up the installed files:

<pre>cd path_to_bugzilla_installation
sudo tar -c -v . | bzip2 -c > ~/bugzilla-2.22.1-files-backup.tar.bz2</pre>

* Perform the actual update using [[CVS]] ([[CVS]] password is "anonymous"):

<pre>cvs login
sudo cvs update -rBugzilla_Stable -dP</pre>

* Watch for conflicts during update; if any found, fix as demonstrated in [[Bugzilla 2.22 to 2.22.1 upgrade notes]].

* Run <tt>sudo ./checksetup.pl</tt> from the command line.
* With <tt>sudo</tt>, use my custom <tt>repair-bugzilla.sh</tt> to repair the ownership and permissions on the installed files.
* In the "Parameters" section empty the <tt>shutdownhtml</tt> field; in order to get there you may need to explicitly navigate to <tt>editparams.cgi</tt> and log in.
* Run <tt>sanitycheck.cgi</tt> from within the browser.
* Test the installation.

= Future improvements =

This process could be largely automated via a shell script.

= See also =

* Release notes: http://www.bugzilla.org/releases/2.22.2/release-notes.html
* Security advisory: http://www.bugzilla.org/security/2.20.3/
