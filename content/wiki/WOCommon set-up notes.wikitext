---
tags: development
---
= Setting up an empty repository =

<pre>sudo svnadmin create ~/Developer/svnrep/WOCommon
sudo chown -R svn:svn ~/Developer/svnrep/WOCommon
cd trabajo
mkdir WOCommon
cd WOCommon
mkdir trunk tags branches
svn import http://localhost:8080/svnrep/WOCommon
rmdir branches tags trunk
svn co http://localhost:8080/svnrep/WOCommon/trunk trunk</pre>

= Setting up other projects to use [[WOCommon]] =

First set up the <tt>svn:externals</tt> property:

<pre>cd path_to_project_working_copy
svn propset svn:externals "WOCommon URL_to_WOCommon_trunk" .
svn commit -m "Set up WOCommon external"
svn up</pre>

Then add <tt>WOCommon</tt> ''as a folder reference'' to your Xcode project; this allows you to automatically see any new files that get added to [[WOCommon]] from within Xcode. Unfortunately to be able to actually use a file you must drag a copy of it into your Xcode project (the folder reference is not enough in itself). For this reason create a separate "WOCommon" group to which you can drag used files; this has the added benefit of allowing you to see the in-use files at a glance.

In order for Xcode to find the files you'll need to change your <tt>HEADER_SEARCH_PATHS</tt> in your [[xcconfig]] file from this (assuming you're using [[buildtools]]):

<pre>HEADER_SEARCH_PATHS                 = "$(SOURCE_ROOT)"</pre>

To this:

<pre>HEADER_SEARCH_PATHS                 = "$(TARGET_BUILD_DIR)" "$(SOURCE_ROOT)"</pre>

= Adding new files to [[WOCommon]] =

There are two ways to add new files to [[WOCommon]]:

* In the [[WOCommon]] checkout created above, new files can be added to the repository using the normal [[Subversion]] <tt>add</tt> and <tt>commit</tt> commands.
* If you add files to the <tt>WOCommon</tt> directory in an external checkout they will be ignored whenever you perform a <tt>commit</tt> but you can explicitly commit them with a <tt>svn commit WOCommon</tt>.

= Keeping copies in sync =

In the main [[WOCommon]] repository you can pull in changes made in other projects with an <tt>svn up</tt>. Likewise in other projects you can pull in changes made elsewhere with an <tt>svn up</tt>.

= Switching branches =

To switch to another [[WOCommon]] branch it won't be sufficient to just use the <tt>svn switch</tt> command. You'll actually have to do an <tt>svn propedit svn:externals .</tt> and change the repository URL to point to the new branch, then do an <tt>svn up</tt>.
